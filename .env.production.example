# PM Arbitrage Engine — Production Environment Configuration
# Copy to .env.production and fill in real values:
#   cp .env.production.example .env.production
#   chmod 600 .env.production
#
# Lines marked "# REPLACE WITH REAL VALUE" must be changed before deployment.
# Lines marked "# safe default" can be left as-is for paper trading.

# Application
NODE_ENV=production                    # safe default
PORT=8080                              # safe default

# Database
# IMPORTANT: Update password to match docker-compose.dev.yml POSTGRES_PASSWORD
DATABASE_URL="postgresql://postgres:CHANGE_ME_STRONG_PASSWORD@localhost:5433/pmarbitrage?schema=public"  # REPLACE WITH REAL VALUE

# Trading Engine
POLLING_INTERVAL_MS=30000              # safe default

# Kalshi API Configuration
KALSHI_API_KEY_ID=                                     # REPLACE WITH REAL VALUE (from demo.kalshi.co dashboard)
KALSHI_PRIVATE_KEY_PATH=./secrets/key.pem              # REPLACE WITH REAL VALUE (path to RSA private key)
KALSHI_API_BASE_URL=https://demo-api.kalshi.co         # safe default (sandbox)

# Polymarket Configuration
POLYMARKET_PRIVATE_KEY=                                # REPLACE WITH REAL VALUE (wallet private key, hex, no 0x prefix)
POLYMARKET_CLOB_API_URL=https://clob.polymarket.com    # safe default
POLYMARKET_WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market  # safe default
POLYMARKET_CHAIN_ID=137                                # safe default

# Edge Calculation
DETECTION_MIN_EDGE_THRESHOLD=0.008     # safe default (0.8%)
DETECTION_GAS_ESTIMATE_USD=0.30        # safe default
DETECTION_POSITION_SIZE_USD=300        # safe default

# Gas Estimation (Polymarket on-chain)
POLYMARKET_RPC_URL=https://polygon-rpc.com             # safe default
GAS_BUFFER_PERCENT=20                                   # safe default
GAS_POLL_INTERVAL_MS=30000                              # safe default
GAS_POL_PRICE_FALLBACK_USD=0.40                         # safe default
POLYMARKET_SETTLEMENT_GAS_UNITS=150000                  # safe default

# Risk Management
RISK_BANKROLL_USD=10000                # safe default (paper trading bankroll)
RISK_MAX_POSITION_PCT=0.03             # safe default (3%)
RISK_MAX_OPEN_PAIRS=10                 # safe default
RISK_DAILY_LOSS_PCT=0.05               # safe default (5%)

# Operator API Authentication
OPERATOR_API_TOKEN=                    # REPLACE WITH REAL VALUE (strong random token)

# Paper Trading Mode — BOTH must be 'paper' for paper trading validation
PLATFORM_MODE_KALSHI=paper             # safe default — DO NOT change to 'live'
PLATFORM_MODE_POLYMARKET=paper         # safe default — DO NOT change to 'live'
PAPER_FILL_LATENCY_MS_KALSHI=150       # safe default
PAPER_SLIPPAGE_BPS_KALSHI=5            # safe default
PAPER_FILL_LATENCY_MS_POLYMARKET=800   # safe default
PAPER_SLIPPAGE_BPS_POLYMARKET=15       # safe default
ALLOW_MIXED_MODE=false                 # safe default

# Telegram Alerts
TELEGRAM_BOT_TOKEN=                    # REPLACE WITH REAL VALUE (from @BotFather)
TELEGRAM_CHAT_ID=                      # REPLACE WITH REAL VALUE (your chat ID)
TELEGRAM_TEST_ALERT_CRON=0 8 * * *    # safe default (daily 8am UTC)
TELEGRAM_TEST_ALERT_TIMEZONE=UTC       # safe default
TELEGRAM_SEND_TIMEOUT_MS=2000          # safe default
TELEGRAM_MAX_RETRIES=3                 # safe default
TELEGRAM_BUFFER_MAX_SIZE=100           # safe default
TELEGRAM_CIRCUIT_BREAK_MS=60000        # safe default

# CSV Trade Logging
CSV_TRADE_LOG_DIR=./data/trade-logs    # safe default
CSV_ENABLED=true                       # safe default

# Compliance Validation
COMPLIANCE_MATRIX_CONFIG_PATH=config/compliance-matrix.yaml  # safe default
